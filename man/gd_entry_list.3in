.\" gd_entry_list.3.  The gd_entry_list man page.
.\"
.\" Copyright (C) 2012, 2016 D. V. Wiebe
.\"
.\""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
.\"
.\" This file is part of the GetData project.
.\"
.\" Permission is granted to copy, distribute and/or modify this document
.\" under the terms of the GNU Free Documentation License, Version 1.2 or
.\" any later version published by the Free Software Foundation; with no
.\" Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
.\" Texts.  A copy of the license is included in the `COPYING.DOC' file
.\" as part of this distribution.
.\"
.TH gd_entry_list 3 "25 December 2016" "Version 0.10.0" "GETDATA"

.SH NAME
gd_entry_list, gd_field_list, gd_field_list_by_type gd_mfield_list, gd_mfield_list_by_type,
gd_mvector_list, gd_vector_list \(em list field entries in a Dirfile

.SH SYNOPSIS
.SC
.B #include <getdata.h>
.HP
.BI "const char **gd_entry_list(DIRFILE *" dirfile ,
.BI "const char *" parent ", int " type ", unsigned int " flags );
.HP
.BI "const char **gd_field_list(DIRFILE *" dirfile );
.HP
.BI "const char **gd_field_list_by_type(DIRFILE *" dirfile ", gd_entype_t " type );
.HP
.BI "const char **gd_mfield_list(DIRFILE *" dirfile ", const char *" parent );
.HP
.BI "const char **gd_mfield_list_by_type(DIRFILE *" dirfile ,
.BI "const char *" parent ", gd_entype_t " type );
.HP
.BI "const char **gd_mvector_list(DIRFILE *" dirfile ", const char *" parent );
.HP
.BI "const char **gd_vector_list(DIRFILE *" dirfile );
.EC

.SH DESCRIPTION
The
.FN gd_entry_list
function queries a dirfile(5) database specified by
.ARG dirfile
and finds all the fields satisfying the provided criteria.  If
.ARG parent
is non-NULL, metafields under the field specified by
.ARG parent
are considered; otherwise, top-level fields are considered, and metafields
ignored.

The
.ARG type
argument should be one of the following symbols indicating an explicit entry
type to list:
.IP
.SC
.BR GD_BIT_ENTRY ", " GD_CARRAY_ENTRY ", " GD_CONST_ENTRY ", " GD_DIVIDE_ENTRY ,
.BR GD_INDEX_ENTRY ", " GD_INDIR_ENTRY ", " GD_LINCOM_ENTRY ,
.BR GD_LINTERP_ENTRY ", " GD_MPLEX_ENTRY ", " GD_MULTIPLY_ENTRY ,
.BR GD_PHASE_ENTRY ", " GD_POLYNOM_ENTRY ", " GD_RAW_ENTRY ", " GD_RECIP_ENTRY ,
.BR GD_SARRAY_ENTRY ", " GD_SBIT_ENTRY ", " GD_SINDIR_ENTRY ,
.BR GD_STRING_ENTRY ", " GD_WINDOW_ENTRY .
.EC
.PP
.RB ( GD_INDEX_ENTRY
is a special field type for the implicit
.I INDEX
field) or else one of the following special symbols:
.DD GD_ALL_ENTRIES \fR(=\fB0\fR)
List entries of all types.
.DD GD_ALIAS_ENTRIES
List only aliases.  This is the only way to get a list including aliases which
do not point to valid field codes.
.DD GD_SCALAR_ENTRIES
List only scalar field types
.RB ( CONST ", " CARRAY ", " SARRAY ", " STRING ).
.DD GD_VECTOR_ENTRIES
List only numeric-valued vector field types (all field types except
.B SINDIR
and the scalar field types listed above).
.PP
The
.ARG flags
argument should be zero or more of the following flags, bitwise or'd together:
.DD GD_ENTRIES_HIDDEN
Include hidden entries (see
.F3 gd_hidden )
in the list: normally hidden entries are skipped;
.DD GD_ENTRIES_NOALIAS
Exclude aliases from the list: normally aliases are considered the same as
their target (that is: if a field satisfies the criteria, both its canonical
name and all its aliases will appear in the list).
.PP
The array returned will be de-allocated by a call to
.F3 gd_close
and should not be de-allocated by the caller.  The list returned should not be
assumed to be in any particular order.  The array is terminated by a NULL
pointer.  The number of elements in the array, excluding the terminating NULL,
can be obtained from an equivalent call to
.F3 gd_nentries .

The caller may not modify any strings in the array, or the array itself.  Doing
so may cause database corruption.  The pointer returned is guaranteed to be
valid at least until
.FN gd_entry_list
is called again on the same DIRFILE object, or until the array is de-allocated
by a call to
.F3 gd_close .
(Although the data may have become obsolete, if metadata have been modified in
the interrim.)

This function has a subset of the functionality of the
.F3 gd_match_entries
function (q.v.).

.SS Special Cases
The call
.RS
.BI gd_field_list( dirfile );
.RE
.PP
is equivalent to
.RS
.BI gd_entry_list( dirfile ", NULL, GD_ALL_ENTRIES, 0);
.RE
.PP
The call
.RS
.BI gd_field_list_by_type( dirfile ", " type );
.RE
.PP
is equivalent to
.RS
.BI gd_entry_list( dirfile ", NULL, " type ", 0);"
.RE
.PP
The call
.RS
.BI gd_mfield_list( dirfile ", " parent );
.RE
.PP
is equivalent to
.RS
.BI gd_entry_list( dirfile ", " parent ", GD_ALL_ENTRIES, 0);"
.RE
.PP
The call
.RS
.BI gd_mfield_list_by_type( dirfile ", " parent ", " type );
.RE
.PP
is equivalent to
.RS
.BI gd_entry_list( dirfile ", " parent ", " type ", 0);"
.RE
.PP
The call
.RS
.BI gd_mvector_list( dirfile ", " parent );
.RE
.PP
is equivalent to
.RS
.BI gd_entry_list( dirfile ", " parent ", GD_VECTOR_ENTRIES, 0);"
.RE
.PP
The call
.RS
.BI gd_vector_list( dirfile );
.RE
.PP
is equivalent to
.RS
.BI gd_entry_list( dirfile ", NULL, GD_VECTOR_ENTRIES, 0);"
.RE

.SH RETURN VALUE
Upon successful completion, these functions returns a pointer to an array of
strings containing the names of all the entries in the database satisfying the
supplied criteria.  On error, they return zero and store a negative-valued
error code in the
.B DIRFILE
object which may be retrieved by a subsequent call to
.F3 gd_error .
Possible error codes are:
.DD GD_E_BAD_CODE
The supplied parent field code was not found, or referred to a metafield itself.
.DD GD_E_BAD_DIRFILE
The supplied dirfile was invalid.
.DD GD_E_BAD_ENTRY
The
.ARG type
parameter supplied was not one of the symbols listed above.
.PP
A descriptive error string for the error may be obtained by calling
.F3 gd_error_string .

.SH HISTORY
The
.FN get_field_list
function appeared in GetData-0.3.0.

The
.FN get_field_list_by_type ,
.FN get_mfield_list ,
.FN get_mfield_list_by_type ,
.FN get_mvector_list ,
and
.FN get_vector_list
functions appeared in GetData-0.4.0.

In GetData-0.7.0, these functions were renamed to
.FN gd_field_list ,
.FN gd_field_list_by_type ,
.FN gd_mfield_list ,
.FN gd_mfield_list_by_type ,
.FN gd_mvector_list ,
and
.FN gd_vector_list .

The
.FN gd_entry_list
function appeared in GetData-0.8.0.

.SH SEE ALSO
.F3 gd_error ,
.F3 gd_error_string ,
.F3 gd_hidden ,
.F3 gd_match_entries ,
.F3 gd_nentries ,
.F3 gd_open ,
dirfile(5)
